{"pageProps":{"data":{"category":null,"content":"\n>  依赖注入在程序编写中常用于解决耦合问题，减少代码的复杂性，。\n\n在电商网站上买东西，下完单后就需要支付，可以选择微信、支付宝、信用卡等方式。最开始只有微信支付。\n\n```js\nclass Order {\n  \n  // 微信支付\n  wechatPay() {\n    new WeChatPay().pay();\n  }\n  \n}\n```\n\n一段时间之后需要接入支付宝、信用卡。每新增一种支付方式就需要在里面加一个对应的方法。这样代码的灵活性就不高。而且Order强耦合了所有的支付方式。Order类依赖了WechatPay类、Alipay类、CreditCard类。\n\n```js\nclass Order {\n  \n  // 微信支付\n  wechatPay() {\n    new WechatPay().pay();\n  }\n  // 支付宝\n  alipay() {\n    new Alipay().pay();\n  }\n  // 信用卡\n  crditCard() {\n    new CreditCard().pay();\n  }\n}\n```\n\n那么可不可以解除这种依赖关系，将Order对其他类的控制权交给第三方呢，依赖注入可以实现，将支付方式交给第三方注入到Order类中，Order只需要调用需要的方法即可。\n\n```js\nclass Order {\n  \n  constructor({payMethod}) {\n    this._payMethod = payMethod;\n  }\n  \n  pay() {\n    this._payMethod.pay();\n  }\n}\n\nfunction getMethodPay (name) {\n  return {\n    wechatPay: new WechatPay(),\n    alipay: new Alipay(),\n    crditCard: new CreditCard()\n  }[name];\n}\n\nconst order = new Order({\n  payMethod: getMethodPay(\"wechatPay\")\n})\n\norder.pay();\n```\n\n先找到需要的支付方式，传入到Order中，Order不关心传入的是哪种支付方式，只需要调用对用的支付方法即可。","createTime":1654046061196,"creativeType":"original","description":"\n 依赖注入在程序编写中常用于解决耦合问题，减少代码的复杂性，。\n\n在电商网站上买东西，下完单后就需要支付，可以选择微信、支付宝、信用卡等方式。最开始只有微信支付。\n\njs\nclass Order {\n  \n   微信支付\n  wechatPay() {\n    new WeChatPay().pay();\n  }\n  \n}\n\n\n一段时间之后需要接入支付宝、信用卡。每新增一种支","headerImg":"","id":"9b0936a9-2557-4ce0-a4ba-3e67e405c023","isDeleted":false,"likeCount":0,"name":"依赖注入","operator":{"avatar":"//file.vwood.xyz/2022/07/13/upload_xtola9p0z8ctzyg5g014tfmjkokb7ydq.jpg","description":"一个懒惰、躺平的程序员","github":"https://github.com/abelce","id":"96f16846-31f2-489c-9af0-d4ca13e836e4","name":"文钦"},"operatorID":"96f16846-31f2-489c-9af0-d4ca13e836e4","tags":["依赖注入"],"updateTime":1654047697168,"viewCount":137},"id":"9b0936a9-2557-4ce0-a4ba-3e67e405c023","latestArticleList":[{"id":"67eb1db1-28cf-4ae6-9263-5aea9cb8b55e","name":"css伪类:not用法","tags":[],"description":"","content":""},{"id":"38abab46-1f1d-47e0-9f3d-aeafdf41a0e7","name":"js 实现 LRU缓存","tags":[],"description":"","content":""},{"id":"02eea954-494c-4c35-8f80-d34e70f87807","name":"低代码文章收集","tags":[],"description":"","content":""},{"id":"f6ea6c70-76ba-40fa-9f5b-792afbf7fe8b","name":"记又拍云接入过程","tags":[],"description":"","content":""},{"id":"281b0b57-0e7e-4033-bcad-8b886535e127","name":"chrome文字定位与::target-text样式设置","tags":[],"description":"","content":""}]},"initialMobxState":{"userStore":{"currentUser":null,"users":[],"token":"","qiniuToken":"","userCount":0,"productCount":0,"commentCount":0,"settingType":"products"},"productStore":{},"commentStore":{},"noteStore":{},"askStore":{},"stypeStore":{}},"__N_SSG":true}